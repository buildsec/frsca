<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" as="font" href="https://buildsec.github.io/frsca/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://buildsec.github.io/frsca/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>


<link rel="stylesheet" href="https://buildsec.github.io/frsca/main.css">



  
  
    
  

  
  
    
    
  
  
  
    
  
  
  
  
    
  
  
  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	

<title>Architecture | FRSCA</title>
<meta name="description" content="Architecture summary of FRSCA.">
<link rel="canonical" href="https://buildsec.github.io/frsca/docs/getting-started/architecture/">










<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://buildsec.github.io/frsca/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Docs",
            "item": "https://buildsec.github.io/frsca/docs/"
          },
        
      
        
        
        
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Getting Started",
            "item": "https://buildsec.github.io/frsca/docs/getting-started/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  4 ,
            "name": "Architecture",
            "item": "https://buildsec.github.io/frsca/docs/getting-started/architecture/"
          },
        
      
    
  }
</script>




  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://buildsec.github.io/frsca/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://buildsec.github.io/frsca/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://buildsec.github.io/frsca/favicon-16x16.png">
  
    <link rel="manifest" href="https://buildsec.github.io/frsca/site.webmanifest">
  


  

</head>

  

<body class="docs single">
  
  
  
  
<div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://buildsec.github.io/frsca">FRSCA</a>
		<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
			<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/buildsec/frsca"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
						<li class="nav-item docs active">
							<a class="nav-link" href="https://buildsec.github.io/frsca/docs/getting-started/introduction/">Docs</a>
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
						aria-label="Search docs..." autocomplete="off">
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>



  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row flex-xl-nowrap">
	  
<div class="col-lg-5 col-xl-4 docs-sidebar">
	<nav class="docs-links" aria-label="Main navigation">
			
			
			
			
					
					
					
							<h3>Getting Started</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://buildsec.github.io/frsca/docs/getting-started/introduction/">Factory for Repeatable Secure Creation of Artifacts (FRSCA)</a></li>
							                           
									<li><a class="docs-link" href="https://buildsec.github.io/frsca/docs/getting-started/quick-start/">Quick Start</a></li>
							                           
									<li><a class="docs-link active" href="https://buildsec.github.io/frsca/docs/getting-started/architecture/">Architecture</a></li>
							
					</ul>
					
					
					
					
							<h3>Contributing</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://buildsec.github.io/frsca/docs/contributing/how-to-contribute/">How to Contribute</a></li>
							
					</ul>
					
					
					
					
							<h3>Help</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://buildsec.github.io/frsca/docs/help/faq/">FAQ</a></li>
							                           
									<li><a class="docs-link" href="https://buildsec.github.io/frsca/docs/help/using-cue/">Using CUE</a></li>
							
					</ul>
					
					
			
	</nav>
</div>

	  
  
  <nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
  	<div class="page-links">
  			<h3>On this page</h3>
  			<nav id="TableOfContents">
  					<ul>
  							
  							<li><a href="https://buildsec.github.io/frsca/docs/getting-started/architecture/#diagram-of-key-components">Diagram of Key Components</a></li>
  							
  							
  							<li><a href="https://buildsec.github.io/frsca/docs/getting-started/architecture/#provisioning">Provisioning</a></li>
  							
  							
  							<li><a href="https://buildsec.github.io/frsca/docs/getting-started/architecture/#pipeline">Pipeline</a></li>
  							
  							
  							<li><a href="https://buildsec.github.io/frsca/docs/getting-started/architecture/#production-recommendations">Production Recommendations</a></li>
  							
  							
  					</ul>
  			</nav>
  	</div>
  </nav>
  

      <main class="docs-content col-lg-11 col-xl-9">
         <h1>Architecture</h1> 
        <p class="lead">Architecture summary of FRSCA.</p>
        <h2 id="diagram-of-key-components">Diagram of Key Components</h2>
<p><img src="https://buildsec.github.io/frsca/docs/getting-started/architecture/../../../img/frsca.png" alt="frsca-architecture" /></p>
<h2 id="provisioning">Provisioning</h2>
<p>The environment is provisioned using <code>make setup-frsca</code> which deploys a variety
of Cue definitions and Helm charts. The resulting environment contains Tekton,
Chains, Spire, Vault, the various Tasks, and Pipeline definitions.</p>
<p>When the infrastructure starts, several components will be defined or running:</p>
<ol>
<li>Pipelines, Tasks, and Triggers will be defined according to the definition of
the environment.</li>
<li>Cert-manager is deployed in the FRSCA setup to allow the various components
running inside the cluster to use TLS. In many environments, components like
Vault, Spire, and the OCI Registry would be external to the cluster and have
a certificate signed by a public authority or the company's internal CA.</li>
<li>Vault is deployed with development settings inside the cluster. In many
environments, this would be managed outside of the cluster.</li>
<li>Spire is deployed inside the cluster. This is also typically deployed and
managed external to the cluster.</li>
<li>Vault is configured with the transit plugin and a long term signing key to
sign images. Authorization is configured to require a valid OIDC credential
from Spire. The public signing key is exported from the transit plugin and
loaded into tooling that needs to verify image signatures.</li>
<li>Chains is configured to perform signing with Vault and request a Spire
credential from the Spire Node.</li>
<li>The Spire Node provides credentials to Chains after verifying the Kubernetes
service account and namespace of Chains.</li>
<li>An admission controller is configured to require all containers deployed in
the FRSCA cluster have been signed by the team that provisions the cluster.</li>
</ol>
<h2 id="pipeline">Pipeline</h2>
<p>The following actions occur in a typical pipeline:</p>
<ol>
<li>A developer commits their code to a Git server. That server will typically
require multiple reviewers to permit a merge into the main branch.</li>
<li>A Tekton trigger detects the change and creates a PipelineRun.</li>
<li>The PipelineRun runs one or more TaskRun steps, each of which are monitored
by Chains.</li>
<li>TaskRun steps will include SBOM generation and vulnerability scanning.</li>
<li>A TaskRun step pushes the image and associated SBOM to an OCI repository.</li>
<li>Chains creates an attestation of the steps performed in the task run.</li>
<li>Chains signs the image and attestation using credentials from Spire and Vault
for the signing.</li>
<li>Chains pushes attestations and signatures to the OCI repository.</li>
</ol>
<h2 id="production-recommendations">Production Recommendations</h2>
<ol>
<li>Production should be hardened per recommendations from CIS and similar
organizations.</li>
<li>The admission controller in production should prevent containers from being
deployed with privileged access to the host for all user workloads.</li>
<li>The admission controller should also be configured with the public signing
key exported from Vault, and require images to be signed with that key.</li>
</ol>

        
        
<div class="docs-navigation d-flex justify-content-between">
  
  
  
  
  
    
    
    
    
      
    
  

  
  
  
  
  
    
    
    
      
      
        
      
    
      
      
        
          
          
          <a class="ms-auto" href="https:&#x2F;&#x2F;buildsec.github.io&#x2F;frsca&#x2F;docs&#x2F;contributing&#x2F;how-to-contribute&#x2F;">
            <div class="card my-1">
              <div class="card-body py-2">
                How to Contribute &rarr;
              </div>
            </div>
          </a>
          
          
          
        
      
    
      
      
        
      
    
  
</div>

      </main>
    </div>
  </div>
</div>


  
    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Powered by <a href="https://www.getzola.org/">Zola</a>, and <a href="https://github.com/aaranxu/adidoks">AdiDoks</a></li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  

  
<script src="https://buildsec.github.io/frsca/js/main.js" defer></script>

  <script src="https://buildsec.github.io/frsca/plugins/elasticlunr.min.js" defer></script>
  <script src="https://buildsec.github.io/frsca/search_index.en.js" defer></script>
  <script src="https://buildsec.github.io/frsca/js/search.js" defer></script>

  
</body>
</html>
